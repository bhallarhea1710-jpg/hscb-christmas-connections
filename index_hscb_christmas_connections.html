<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HSCB lab Christmas Connections</title>
<style>
  :root{--bg1:#07142d;--accent:#d946ef;--card:#0b1220}
  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;background:linear-gradient(180deg,var(--bg1),#052b46);color:#eef2ff;overflow-x:hidden}
  .wrap{max-width:1024px;margin:28px auto;padding:18px;position:relative;z-index:3}
  header{display:flex;align-items:center;gap:14px;margin-bottom:18px}
  .logo{width:72px;height:72px;border-radius:12px;background:linear-gradient(135deg,#ffdf7e,#ff7ab6);display:flex;align-items:center;justify-content:center;font-size:34px;box-shadow:0 8px 30px rgba(0,0,0,0.45)}
  h1{margin:0;font-size:24px;color:white;letter-spacing:0.2px}
  .subtitle{color:#c6f7ff;opacity:0.95;margin-top:6px;font-size:13px}
  .board{display:grid;grid-template-columns:1fr 420px;gap:18px;margin-top:12px}
  .panel{background:rgba(255,255,255,0.03);backdrop-filter:blur(6px);border-radius:14px;padding:14px;border:1px solid rgba(255,255,255,0.04)}
  .tiles{display:flex;flex-wrap:wrap;gap:10px;padding:8px;min-height:78px}
  .tile{padding:8px 14px;border-radius:999px;background:linear-gradient(180deg,#ffffff10,#ffffff06);border:1px solid rgba(255,255,255,0.06);cursor:grab;color:#fff;font-weight:700;box-shadow:0 6px 18px rgba(3,7,18,0.35);user-select:none}
  .bins{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .bin{min-height:140px;padding:12px;border-radius:10px;border:2px dashed rgba(255,255,255,0.06);background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));display:flex;flex-direction:column;gap:8px}
  .bin-label{font-weight:800;color:#fff;margin-bottom:6px}
  .controls{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  button{padding:9px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:800;cursor:pointer;box-shadow:0 8px 20px rgba(217,70,239,0.12)}
  button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.08);color:#e6f6ff}
  .result{margin-top:12px;padding:12px;border-radius:10px;font-weight:700}
  .correct{background:linear-gradient(90deg,#052e14,#064e2f);color:#baf5d9;border:1px solid rgba(122,252,193,0.12)}
  .wrong{background:linear-gradient(90deg,#3b1f00,#5a2a00);color:#ffe8c2;border:1px solid rgba(255,214,138,0.08)}

  footer{margin-top:18px;color:#9bd0cf;font-size:13px}

  /* decorative megakaryocytes layer */
  .decor{pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:1;overflow:hidden}
  .mega{position:absolute;top:-16vh;width:160px;height:160px;opacity:0.98;transform-origin:center;animation:drift 14s linear infinite;filter:drop-shadow(0 8px 18px rgba(0,0,0,0.35));}
  .mega svg{width:100%;height:100%}
  .m1{left:6%;animation-duration:16s;transform:scale(1.06) rotate(-8deg);}
  .m2{left:20%;animation-duration:11s;transform:scale(0.96) rotate(6deg);}
  .m3{left:36%;animation-duration:14s;transform:scale(1.12) rotate(-10deg);}
  .m4{left:54%;animation-duration:10s;transform:scale(0.92) rotate(7deg);}
  .m5{left:72%;animation-duration:13s;transform:scale(1.02) rotate(-4deg);}
  .m6{left:88%;animation-duration:12s;transform:scale(1.08) rotate(9deg);}

  @keyframes drift{
    0%{transform:translateY(-18vh) rotate(0deg) scale(1); opacity:0.95}
    50%{opacity:1; transform:translateY(40vh) rotate(40deg) scale(1.02)}
    100%{transform:translateY(120vh) rotate(96deg) scale(0.98); opacity:0.9}
  }

  /* small snowflakes */
  .flake{position:absolute;top:-6vh;font-size:20px;opacity:0.9;animation:fall 10s linear infinite}
  .f1{left:12%;animation-duration:9s}
  .f2{left:30%;animation-duration:12s}
  .f3{left:48%;animation-duration:11s}
  .f4{left:66%;animation-duration:13s}
  .f5{left:82%;animation-duration:10s}
  @keyframes fall{0%{transform:translateY(-6vh)}100%{transform:translateY(110vh)}}

  /* confetti */
  .confetti{pointer-events:none;position:fixed;left:0;top:0;width:100%;height:0;z-index:6;overflow:visible}
  .confetti span{position:absolute;width:8px;height:12px;border-radius:2px;background:red;animation:conf 1.3s ease-out forwards;}
  @keyframes conf{to{transform:translateY(120vh) rotate(360deg);opacity:0}}

</style>
</head>
<body>
<div class="decor" aria-hidden="true">
  <!-- Irregular megakaryocyte SVGs with multilobed nucleus -->
  <div class="mega m1" aria-hidden="true">
    <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="megakaryocyte">
      <defs>
        <radialGradient id="mg1" cx="50%" cy="40%">
          <stop offset="0%" stop-color="#fff6f6"/>
          <stop offset="60%" stop-color="#ffdede"/>
          <stop offset="100%" stop-color="#ffbfbf"/>
        </radialGradient>
      </defs>
      <path d="M90 18 C68 20 48 34 36 56 C22 82 32 106 46 122 C62 140 86 152 108 150 C132 148 150 138 162 120 C174 100 170 78 158 60 C146 42 124 28 102 22 C96 20 92 18 90 18 Z" fill="url(#mg1)" stroke="#ff8b8b" stroke-width="2"/>
      <g stroke="#ff8b8b" stroke-width="3" stroke-linecap="round">
        <path d="M46 60 q-18 6 -26 20" fill="none"/>
        <path d="M134 56 q22 10 30 26" fill="none"/>
        <path d="M40 100 q-10 14 8 28" fill="none"/>
        <path d="M140 98 q10 12 -6 28" fill="none"/>
      </g>
      <!-- large multilobed nucleus (connected lobes) -->
      <g transform="translate(60,64)">
        <ellipse cx="18" cy="12" rx="20" ry="16" fill="#fffaf8" stroke="#ffecec" stroke-width="1"/>
        <ellipse cx="42" cy="18" rx="22" ry="18" fill="#fffaf8" stroke="#ffecec" stroke-width="1"/>
        <ellipse cx="28" cy="36" rx="18" ry="14" fill="#fffaf8" stroke="#ffecec" stroke-width="1"/>
      </g>
    </svg>
  </div>

  <div class="mega m2" aria-hidden="true">
    <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="megakaryocyte">
      <defs>
        <radialGradient id="mg2" cx="50%" cy="40%">
          <stop offset="0%" stop-color="#fff8e6"/>
          <stop offset="60%" stop-color="#ffe6b3"/>
          <stop offset="100%" stop-color="#ffd280"/>
        </radialGradient>
      </defs>
      <path d="M90 16 C72 20 54 34 40 56 C26 80 30 104 44 120 C60 138 84 148 106 146 C128 144 148 132 158 112 C168 92 164 70 154 54 C144 38 126 26 106 20 C100 18 96 16 90 16 Z" fill="url(#mg2)" stroke="#ffb36a" stroke-width="2"/>
      <g stroke="#ffb36a" stroke-width="3" stroke-linecap="round">
        <path d="M50 58 q-16 6 -22 18" fill="none"/>
        <path d="M130 54 q20 10 26 24" fill="none"/>
      </g>
      <g transform="translate(60,64)">
        <ellipse cx="18" cy="14" rx="18" ry="14" fill="#fffdf4" stroke="#fff1d9" stroke-width="1"/>
        <ellipse cx="38" cy="30" rx="20" ry="16" fill="#fffdf4" stroke="#fff1d9" stroke-width="1"/>
      </g>
    </svg>
  </div>

  <div class="mega m3" aria-hidden="true">
    <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="megakaryocyte">
      <defs>
        <radialGradient id="mg3" cx="50%" cy="40%">
          <stop offset="0%" stop-color="#f0fbff"/>
          <stop offset="60%" stop-color="#d6f0ff"/>
          <stop offset="100%" stop-color="#bfe6ff"/>
        </radialGradient>
      </defs>
      <path d="M90 22 C70 18 52 30 38 50 C24 70 30 92 44 108 C60 126 82 136 104 136 C126 136 146 124 156 104 C164 84 160 66 148 52 C136 38 116 26 96 22 C92 22 90 22 90 22 Z" fill="url(#mg3)" stroke="#6fbff8" stroke-width="2"/>
      <g stroke="#6fbff8" stroke-width="3" stroke-linecap="round">
        <path d="M56 58 q-12 6 -18 18" fill="none"/>
        <path d="M120 56 q18 10 24 24" fill="none"/>
      </g>
      <g transform="translate(54,66)">
        <ellipse cx="22" cy="18" rx="20" ry="16" fill="#f7fdff" stroke="#e6f9ff" stroke-width="1"/>
        <ellipse cx="38" cy="34" rx="16" ry="12" fill="#f7fdff" stroke="#e6f9ff" stroke-width="1"/>
      </g>
    </svg>
  </div>

  <div class="mega m4" aria-hidden="true">
    <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="megakaryocyte">
      <defs>
        <radialGradient id="mg4" cx="50%" cy="40%">
          <stop offset="0%" stop-color="#fff0f8"/>
          <stop offset="60%" stop-color="#ffd6f0"/>
          <stop offset="100%" stop-color="#ffb0e0"/>
        </radialGradient>
      </defs>
      <path d="M90 18 C70 22 52 36 40 56 C26 78 32 100 46 116 C62 134 86 144 108 142 C132 140 150 128 160 110 C170 92 166 72 154 56 C142 40 122 26 100 20 C94 18 92 18 90 18 Z" fill="url(#mg4)" stroke="#ff8ab0" stroke-width="2"/>
      <g stroke="#ff8ab0" stroke-width="3" stroke-linecap="round">
        <path d="M50 60 q-14 8 -20 20" fill="none"/>
        <path d="M132 58 q20 12 26 26" fill="none"/>
      </g>
      <g transform="translate(56,64)">
        <ellipse cx="20" cy="14" rx="18" ry="14" fill="#fff8fb" stroke="#fff0f6" stroke-width="1"/>
        <ellipse cx="36" cy="30" rx="20" ry="16" fill="#fff8fb" stroke="#fff0f6" stroke-width="1"/>
        <ellipse cx="28" cy="38" rx="14" ry="10" fill="#fff8fb" stroke="#fff0f6" stroke-width="1"/>
      </g>
    </svg>
  </div>

  <div class="mega m5" aria-hidden="true">
    <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="megakaryocyte">
      <defs>
        <radialGradient id="mg5" cx="50%" cy="40%">
          <stop offset="0%" stop-color="#fffbe6"/>
          <stop offset="60%" stop-color="#fff2c2"/>
          <stop offset="100%" stop-color="#ffe89a"/>
        </radialGradient>
      </defs>
      <path d="M90 24 C70 22 54 36 42 52 C28 74 32 96 46 112 C62 130 86 138 106 136 C128 134 146 122 158 104 C168 86 164 68 152 52 C140 36 120 26 100 24 C96 24 92 24 90 24 Z" fill="url(#mg5)" stroke="#ffd166" stroke-width="2"/>
      <g stroke="#ffd166" stroke-width="3" stroke-linecap="round">
        <path d="M48 60 q-12 8 -18 20" fill="none"/>
        <path d="M118 58 q18 12 24 26" fill="none"/>
      </g>
      <g transform="translate(54,66)">
        <ellipse cx="20" cy="16" rx="18" ry="14" fill="#fffdf2" stroke="#fff7d8" stroke-width="1"/>
        <ellipse cx="36" cy="32" rx="20" ry="16" fill="#fffdf2" stroke="#fff7d8" stroke-width="1"/>
      </g>
    </svg>
  </div>

  <div class="mega m6" aria-hidden="true">
    <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="megakaryocyte">
      <defs>
        <radialGradient id="mg6" cx="50%" cy="40%">
          <stop offset="0%" stop-color="#e6fff0"/>
          <stop offset="60%" stop-color="#c6ffe0"/>
          <stop offset="100%" stop-color="#9ef0c4"/>
        </radialGradient>
      </defs>
      <path d="M90 20 C72 18 54 30 40 48 C26 70 30 94 46 110 C64 128 88 138 110 136 C132 134 150 120 162 102 C172 84 170 66 158 52 C146 36 126 26 104 22 C98 20 94 20 90 20 Z" fill="url(#mg6)" stroke="#6be6a1" stroke-width="2"/>
      <g stroke="#6be6a1" stroke-width="3" stroke-linecap="round">
        <path d="M46 56 q-10 8 -16 20" fill="none"/>
        <path d="M118 54 q18 12 22 26" fill="none"/>
      </g>
      <g transform="translate(56,66)">
        <ellipse cx="22" cy="18" rx="20" ry="16" fill="#f3fff7" stroke="#eaffef" stroke-width="1"/>
        <ellipse cx="38" cy="34" rx="16" ry="12" fill="#f3fff7" stroke="#eaffef" stroke-width="1"/>
      </g>
    </svg>
  </div>

  <!-- snowflakes -->
  <div class="flake f1">‚ùÑÔ∏è</div>
  <div class="flake f2">‚ùÑÔ∏è</div>
  <div class="flake f3">‚ùÑÔ∏è</div>
  <div class="flake f4">‚ùÑÔ∏è</div>
  <div class="flake f5">‚ùÑÔ∏è</div>
</div>

<div class="confetti" id="confetti"></div>

<div class="wrap">
  <header>
    <div class="logo">üéÖ</div>
    <div>
      <h1>HSCB lab Christmas Connections</h1>
      <div class="subtitle">Festive puzzle ‚Äî drag tiles into four groups of four. Megakaryocyte edition üß¨</div>
    </div>
  </header>

  <div class="board">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div><strong>Tiles</strong></div>
        <div style="color:#cfeef7;font-size:13px">Drag or click to move</div>
      </div>
      <div id="tiles" class="tiles" aria-live="polite" role="list"></div>
      <div class="controls">
        <button id="shuffleBtn">üîÄ Shuffle</button>
        <button id="resetBtn" class="secondary">‚ôªÔ∏è Reset</button>
        <button id="revealBtn" class="secondary">‚ú® Reveal</button>
      </div>
      <div style="margin-top:10px;color:#cfeef7;font-size:13px">Tip: click any tile inside a group to return it to the tiles area.</div>
    </div>

    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div><strong>Groups</strong></div>
        <div style="color:#cfeef7;font-size:13px">Four groups of four</div>
      </div>
      <div class="bins" id="bins" role="list"></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <button id="checkBtn">‚úÖ Check</button>
        <div id="status" style="color:#cfeef7;font-size:13px"></div>
      </div>
      <div id="result" class="result" style="display:none"></div>
    </div>
  </div>

  <footer>Made with üéÑ by ChatGPT & HSCB lab</footer>
</div>

<script>
// Puzzle data
const ITEMS = [
  "Holly","Mistletoe","Carols","Reindeer",
  "Radcliffe","Magdalen","Cherwell","Ashmolean",
  "Pudding","Stocking","Tinsel","Sleigh",
  "Spire","Bodleian","Bridge","Merton"
];

const SOLUTIONS = [
  ["Holly","Mistletoe","Carols","Reindeer"],
  ["Magdalen","Merton","Radcliffe","Ashmolean"],
  ["Pudding","Stocking","Tinsel","Sleigh"],
  ["Cherwell","Spire","Bridge","Bodleian"]
];

let state = { tiles: [], bins: [[],[],[],[]] };

// shuffle utility
function shuffleArr(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }

// render functions
function renderTiles(){ const container=document.getElementById('tiles'); container.innerHTML=''; state.tiles.forEach((t,i)=>{
  const el=document.createElement('div');
  el.className='tile';
  el.draggable=true;
  el.id='tile-'+i;
  el.textContent=t;
  el.setAttribute('role','listitem');
  el.addEventListener('dragstart', (ev)=>{ ev.dataTransfer.setData('text/plain', t); ev.dataTransfer.effectAllowed = 'move'; });
  container.appendChild(el);
}); }

function renderBins(){ const binsEl=document.getElementById('bins'); binsEl.innerHTML=''; for(let b=0;b<4;b++){
  const wrapper=document.createElement('div'); wrapper.style.display='flex'; wrapper.style.flexDirection='column';
  const label=document.createElement('div'); label.className='bin-label'; label.textContent='Group '+(b+1);
  const bin=document.createElement('div'); bin.className='bin'; bin.id='bin-'+b;
  bin.addEventListener('dragover', (e)=>{ e.preventDefault(); e.dataTransfer.dropEffect='move'; });
  bin.addEventListener('drop', (e)=>{ e.preventDefault(); const itemName=e.dataTransfer.getData('text/plain'); if(!itemName) return; moveItemToBin(itemName,b); });
  bin.addEventListener('click', (e)=>{ const target = e.target; if(target.classList.contains('tile')){ const name=target.textContent; removeFromBin(name); } });
  state.bins[b].forEach(name=>{ const t=document.createElement('div'); t.className='tile'; t.textContent=name; t.draggable=true; t.addEventListener('dragstart',(ev)=>{ ev.dataTransfer.setData('text/plain', name); ev.dataTransfer.effectAllowed='move'; }); bin.appendChild(t); });
  wrapper.appendChild(label); wrapper.appendChild(bin); binsEl.appendChild(wrapper);
} }

function moveItemToBin(name, binIndex){
  const ti = state.tiles.indexOf(name);
  if(ti>-1) state.tiles.splice(ti,1);
  state.bins.forEach((arr,idx)=>{ const i=arr.indexOf(name); if(i>-1) arr.splice(i,1); });
  if(state.bins[binIndex].indexOf(name)===-1) state.bins[binIndex].push(name);
  renderAll();
}

function removeFromBin(name){
  state.bins.forEach((arr,idx)=>{ const i=arr.indexOf(name); if(i>-1){ arr.splice(i,1); state.tiles.push(name); } });
  renderAll();
}

function renderAll(){ renderTiles(); renderBins(); document.getElementById('status').textContent = `Tiles: ${state.tiles.length} ‚Ä¢ Groups: ${state.bins.map(b=>b.length).join(', ')}`; document.getElementById('result').style.display='none'; }

function checkSolution(){
  const resultEl=document.getElementById('result');
  let allCorrect=true;
  const wrongGroups=[];
  for(let i=0;i<4;i++){
    const got = [...state.bins[i]].sort();
    const want = [...SOLUTIONS[i]].sort();
    if(got.length!==4 || got.join('|')!==want.join('|')){
      allCorrect=false; wrongGroups.push({index:i+1,got:state.bins[i],want:SOLUTIONS[i]});
    }
  }
  resultEl.style.display='block';
  if(allCorrect){
    resultEl.className='result correct'; resultEl.textContent='üéâ All groups correct ‚Äî well done!'; confettiBurst();
  } else {
    resultEl.className='result wrong';
    let msg = 'Some groups are incorrect. ';
    wrongGroups.forEach(w=>{ msg+=`(Group ${w.index}: ${w.got.length} items) `; });
    msg += 'Tip: click any tile inside a group to move it back to Tiles, or use Reveal to see answers.';
    resultEl.textContent = msg;
  }
}

// interactions
function resetAll(){ state.tiles = [...ITEMS]; state.bins = [[],[],[],[]]; renderAll(); }
function revealSolution(){ state.tiles = []; state.bins = SOLUTIONS.map(arr=>[...arr]); renderAll(); }
function shuffleTiles(){ resetAll(); shuffleArr(state.tiles); renderAll(); }

document.getElementById('shuffleBtn').addEventListener('click', shuffleTiles);
document.getElementById('resetBtn').addEventListener('click', resetAll);
document.getElementById('revealBtn').addEventListener('click', revealSolution);
document.getElementById('checkBtn').addEventListener('click', checkSolution);

// confetti
function confettiBurst(){
  const box=document.getElementById('confetti');
  for(let i=0;i<90;i++){
    const c=document.createElement('span');
    c.style.left=(Math.random()*100)+'%';
    c.style.background=`hsl(${Math.random()*360},80%,60%)`;
    c.style.top='0px';
    c.style.position='absolute';
    c.style.width='8px'; c.style.height='12px'; c.style.borderRadius='2px';
    c.style.transform='rotate('+ (Math.random()*360) +'deg)';
    c.style.animation='conf 1.5s ease-out forwards';
    c.style.animationDelay=(Math.random()*0.5)+'s';
    box.appendChild(c);
    setTimeout(()=>{ box.removeChild(c); },1700);
  }
}

// init
resetAll();
</script>
</body>
</html>
